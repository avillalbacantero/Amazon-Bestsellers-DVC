schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/preprocess.py --input ./data/external/dataset.csv
    deps:
    - path: data/external/dataset.csv
      md5: fa9191cea007ed50aeb0f4ebfe0f4295
      size: 51161
    - path: src/data/preprocess.py
      md5: 0e173b5ab6356245a4daece564e1e7fc
      size: 2254
    outs:
    - path: data/preprocessed
      md5: 0755d127bb690acd6af80658562f62ca.dir
      size: 60405
      nfiles: 1
  featurization:
    cmd: python src/features/featurize.py --input ./data/preprocessed/preprocessed_dataset.csv
    deps:
    - path: data/preprocessed/preprocessed_dataset.csv
      md5: dfa9fd13e7c40d5e5922f6c34d19cb02
      size: 60405
    - path: src/features/featurize.py
      md5: d30d0827da30fc91685558d9fadf24f2
      size: 3402
    params:
      params.yaml:
        featurization.truncatedSVD_number_of_components: 10
    outs:
    - path: data/featurized
      md5: edfba80db9a8638f36233c8176efbf5d.dir
      size: 30973
      nfiles: 1
  split:
    cmd: python src/splits/split_train_test.py --features ./data/featurized/featurized_dataset.npz
    deps:
    - path: data/featurized/featurized_dataset.npz
      md5: 8f583d0f34826657444d5c85a162192f
      size: 30973
    - path: src/splits/split_train_test.py
      md5: 5fafc96704e0ceee789664e534f3c39d
      size: 1902
    params:
      params.yaml:
        split.train_percentage: 0.75
    outs:
    - path: data/processed
      md5: bdbaa59b96e0b1c0b68990ec11c4ed8f.dir
      size: 35424
      nfiles: 2
  training:
    cmd: python src/models/train_model.py --train_data ./data/processed/train_dataset.npz
    deps:
    - path: data/processed/train_dataset.npz
      md5: 1cd8f2e3b52e33b313343ab2ed43aff1
      size: 24495
    - path: src/models/train_model.py
      md5: 641cba32b34185197247ce432feb617f
      size: 1663
    outs:
    - path: models
      md5: d1fdf27a7e574c20585d5b1a8b665998.dir
      size: 830
      nfiles: 1
  evaluation:
    cmd: python src/evaluation/evaluate.py --test_data data/processed/test_dataset.npz
      --model models/linear_regression.joblib
    deps:
    - path: data/processed/test_dataset.npz
      md5: 9ecb87d76b2475e6f6c2d58ba07b534e
      size: 10929
    - path: models/linear_regression.joblib
      md5: b9111db06e9ba18e87aab7dfd1eab0c7
      size: 830
    - path: src/evaluation/evaluate.py
      md5: 5af7dfa5a14207019df533e727a13a7c
      size: 2926
    outs:
    - path: reports/predictions.json
      md5: 5aa32af1b3278447baf93e1a27def148
      size: 11110
    - path: reports/scores.json
      md5: 4770e25f44b284034a34cdc87cca632b
      size: 62
